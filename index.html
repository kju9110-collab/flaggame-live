<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>êµ­ê¸° íŒ¡íŒ¡ ê²Œì„ - ë¬´í•œ ë°˜ë³µ</title>
    <style>
        body { margin: 0; background-color: #90D5FF; overflow: hidden; font-family: sans-serif; display: flex; flex-direction: column; align-items: center; }
        
        /* ìƒë‹¨ UI ì •ë³´ì°½ */
        .info-panel { margin-top: 15px; display: flex; gap: 15px; z-index: 10; }
        .ui-box { background: white; border: 2px solid black; border-radius: 12px; padding: 8px 20px; text-align: center; min-width: 90px; box-shadow: 2px 2px 0px rgba(0,0,0,0.2); }

        /* ì¤‘ì•™ ì›í˜• ê²½ê¸°ì¥ - ê³µê°„ í™•ë³´ë¥¼ ìœ„í•´ ë§ˆì§„ ì¶”ê°€ */
        #arena-container { position: relative; margin: 40px 0; } /* ì›ê³¼ í•˜ë‹¨ êµ­ê¸° ì‚¬ì´ ê³µê°„ ë„ì›€ */
        #arena { 
            width: 320px; height: 320px; border: 8px solid black; border-radius: 50%; 
            background-color: white; position: relative; overflow: visible; /* ê³µì´ ë°–ìœ¼ë¡œ ë‚˜ê°€ì•¼ í•˜ë¯€ë¡œ visible */
        }

        /* ğŸ”´ ì›í˜• ê²½ê¸°ì¥ êµ¬ë© (ì¶œêµ¬) í‘œì‹œ */
        #hole {
            position: absolute; right: -12px; top: 50%; transform: translateY(-50%);
            width: 20px; height: 60px; background-color: #90D5FF; /* ë°°ê²½ìƒ‰ê³¼ ë§ì¶°ì„œ êµ¬ë©ì²˜ëŸ¼ ë³´ì´ê²Œ í•¨ */
            z-index: 5;
        }

        .flag { position: absolute; width: 30px; height: 20px; background-size: cover; border: 0.5px solid #ccc; z-index: 2; transition: transform 0.1s; }

        /* í•˜ë‹¨ ë¬´ì‘ìœ„ êµ­ê¸° ëª©ë¡ - ê°„ê²© ì¡°ì • */
        #flag-list { 
            width: 90%; display: grid; grid-template-columns: repeat(10, 1fr); gap: 3px; 
            padding: 10px; background: rgba(255,255,255,0.3); border-radius: 10px;
        }
        .list-flag { width: 100%; height: 18px; background-size: cover; border: 0.5px solid #555; }
        
        #score-tag { align-self: flex-end; margin-right: 20px; margin-top: 10px; background: white; padding: 5px 15px; border: 2px solid black; font-weight: bold; font-size: 24px; border-radius: 5px; }
    </style>
</head>
<body>

<div class="info-panel">
    <div class="ui-box"><b>TOP WINNERS</b><br><span id="winner-name">-</span></div>
    <div class="ui-box"><b>ROUND</b><br><span id="round-count">1</span>/100</div>
</div>

<div id="arena-container">
    <div id="arena">
        <div id="hole"></div> </div>
</div>

<div id="flag-list"></div>
<div id="score-tag">6,875</div>

<script>
    const arena = document.getElementById('arena');
    const flagListContainer = document.getElementById('flag-list');
    const winnerDisplay = document.getElementById('winner-name');
    const roundDisplay = document.getElementById('round-count');
    
    const radius = 160;
    let flags = [];
    let round = 1;

    // ì‚¬ìš©í•  êµ­ê°€ ì½”ë“œë“¤
    const countryCodes = ['kr', 'us', 'jp', 'cn', 'fr', 'de', 'gb', 'it', 'br', 'ca', 'mx', 'vn', 'au', 'in', 'es', 'ru'];

    // 1. í•˜ë‹¨ êµ­ê¸° ëª©ë¡ì„ ë¬´ì‘ìœ„ íŒ¨í„´ìœ¼ë¡œ ìƒì„±
    function createRandomFlagList() {
        flagListContainer.innerHTML = '';
        const shuffled = [...Array(80)].map(() => countryCodes[Math.floor(Math.random() * countryCodes.length)]);
        shuffled.forEach(code => {
            const f = document.createElement('div');
            f.className = 'list-flag';
            f.style.backgroundImage = `url('https://flagcdn.com/w40/${code}.png')`;
            flagListContainer.appendChild(f);
        });
    }

    // 2. ê²Œì„ ì‹œì‘ (ê³µ ìƒì„± ë° ì´ˆê¸°í™”)
    function initGame() {
        arena.querySelectorAll('.flag').forEach(el => el.remove());
        flags = [];
        
        // ë¬´ì‘ìœ„ë¡œ êµ­ê°€ ì„ íƒí•˜ì—¬ ê³µ ìƒì„±
        for (let i = 0; i < 12; i++) {
            const code = countryCodes[Math.floor(Math.random() * countryCodes.length)];
            const el = document.createElement('div');
            el.className = 'flag';
            el.style.backgroundImage = `url('https://flagcdn.com/w40/${code}.png')`;
            arena.appendChild(el);

            const angle = Math.random() * Math.PI * 2;
            const speed = 2 + Math.random() * 2;
            flags.push({ 
                el, code, x: radius, y: radius, 
                vx: Math.cos(angle) * speed, 
                vy: Math.sin(angle) * speed,
                out: false 
            });
        }
        createRandomFlagList();
    }

    function update() {
        let winnerFound = false;

        flags.forEach(f => {
            if (f.out) return;

            f.x += f.vx;
            f.y += f.vy;

            const dx = f.x - radius;
            const dy = f.y - radius;
            const dist = Math.sqrt(dx * dx + dy * dy);

            // ğŸ”´ êµ¬ë©(ì¶œêµ¬) ì²´í¬ ë¡œì§: ì˜¤ë¥¸ìª½ ì¤‘ì•™ ë¶€ê·¼ (yì¶• 130~190 ì‚¬ì´)
            if (f.x > radius + 140 && f.y > radius - 30 && f.y < radius + 30) {
                // êµ¬ë©ì„ í†µí•´ ë‚˜ê°!
                f.out = true;
                winnerFound = true;
                winnerDisplay.innerText = f.code.toUpperCase();
                
                // 1ë“± ë°œìƒ ì‹œ 2ì´ˆ í›„ ë¦¬ì…‹
                setTimeout(() => {
                    round++;
                    roundDisplay.innerText = round;
                    initGame();
                }, 2000);
                return;
            }

            // ì¼ë°˜ ë²½ ì¶©ëŒ
            if (dist + 15 > radius) {
                const nx = dx / dist, ny = dy / dist;
                const dot = f.vx * nx + f.vy * ny;
                f.vx -= 2 * dot * nx;
                f.vy -= 2 * dot * ny;
                
                // ê°ë„ ë¬´ì‘ìœ„ì„± ì¶”ê°€
                const shift = (Math.random() - 0.5) * 0.3;
                const cos = Math.cos(shift), sin = Math.sin(shift);
                const oldVx = f.vx;
                f.vx = f.vx * cos - f.vy * sin;
                f.vy = oldVx * sin + f.vy * cos;

                f.x = radius + nx * (radius - 15.1);
                f.y = radius + ny * (radius - 15.1);
            }

            f.el.style.left = (f.x - 15) + 'px';
            f.el.style.top = (f.y - 10) + 'px';
        });

        if (!winnerFound) requestAnimationFrame(update);
    }

    initGame();
    update();
</script>
</body>
</html>
