<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>êµ­ê¸° íŒ¡íŒ¡ ê²Œì„</title>
    <style>
        body { margin: 0; background-color: #90D5FF; overflow: hidden; font-family: sans-serif; } /* ë°°ê²½ í•˜ëŠ˜ìƒ‰ */
        #game-container { position: relative; width: 100vw; height: 100vh; }
        
        /* ìƒë‹¨ UI ì •ë³´ì°½ */
        .info-panel {
            position: absolute; top: 10px; left: 50%; transform: translateX(-50%);
            display: flex; gap: 10px; z-index: 10;
        }
        .ui-box {
            background: white; border: 2px solid black; border-radius: 10px;
            padding: 5px 15px; text-align: center; min-width: 80px;
        }

        /* ì¤‘ì•™ ì›í˜• ê²½ê¸°ì¥ */
        #arena {
            position: absolute; top: 50%; left: 50%; transform: translate(-50%, -50%);
            width: 320px; height: 320px; border: 8px solid black; border-radius: 50%;
            background-color: white; overflow: hidden;
        }

        .flag {
            position: absolute; width: 30px; height: 20px;
            background-size: cover; border: 0.5px solid #ccc;
        }

        /* í•˜ë‹¨ êµ­ê¸° ëª©ë¡ */
        #flag-list {
            position: absolute; bottom: 80px; left: 50%; transform: translateX(-50%);
            width: 90%; display: grid; grid-template-columns: repeat(10, 1fr); gap: 2px;
        }
        .list-flag { width: 100%; height: 15px; background-size: cover; border: 0.2px solid #555; }
    </style>
</head>
<body>

<div id="game-container">
    <div class="info-panel">
        <div class="ui-box"><b>TOP WINNERS</b><br>1x</div>
        <div class="ui-box"><b>ROUND: 1/100</b><br><span id="timer">14</span></div>
    </div>

    <div id="arena"></div>

    <div id="flag-list"></div>
    <div style="position:absolute; bottom:20px; right:20px; background:white; padding:5px 15px; border:1px solid black; font-weight:bold; font-size:24px;">6,875</div>
</div>

<script>
    const arena = document.getElementById('arena');
    const arenaSize = 320;
    const radius = arenaSize / 2;
    const flags = [];
    const numFlags = 20;

    // êµ­ê¸° ì´ë¯¸ì§€ ìƒ˜í”Œ (êµ­ê°€ ì½”ë“œë¥¼ ë„£ìœ¼ë©´ ì´ë¯¸ì§€ë¥¼ ê°€ì ¸ì˜µë‹ˆë‹¤)
    const countries = ['kr', 'us', 'jp', 'cn', 'fr', 'de', 'gb', 'it', 'br', 'ca', 'vn', 'mx', 'in', 'au', 'ru', 'es', 'nl', 'se', 'no', 'ch'];

    function createFlags() {
        for (let i = 0; i < numFlags; i++) {
            const el = document.createElement('div');
            el.className = 'flag';
            el.style.backgroundImage = `url('https://flagcdn.com/w40/${countries[i % countries.length]}.png')`;
            arena.appendChild(el);

            // ì´ˆê¸° ìœ„ì¹˜: ì› ì¤‘ì•™ ê·¼ì²˜
            let x = radius;
            let y = radius;
            
            // í•µì‹¬: ë¬´ì‘ìœ„ ê°ë„ ì„¤ì • (ì™”ë‹¤ê°”ë‹¤ ë°©ì§€)
            const angle = Math.random() * Math.PI * 2;
            const speed = 2 + Math.random() * 2; // ì†ë„ë„ ì•½ê°„ì”© ë‹¤ë¥´ê²Œ

            flags.push({
                el, x, y,
                vx: Math.cos(angle) * speed,
                vy: Math.sin(angle) * speed
            });
        }
        
        // í•˜ë‹¨ ì¥ì‹ìš© êµ­ê¸° ë¦¬ìŠ¤íŠ¸ ìƒì„±
        const listContainer = document.getElementById('flag-list');
        for(let i=0; i<80; i++) {
            const f = document.createElement('div');
            f.className = 'list-flag';
            f.style.backgroundImage = `url('https://flagcdn.com/w40/${countries[i % countries.length]}.png')`;
            listContainer.appendChild(f);
        }
    }

    function update() {
        flags.forEach(f => {
            f.x += f.vx;
            f.y += f.vy;

            // ì›í˜• ë²½ ì¶©ëŒ ê°ì§€
            const dx = f.x - radius;
            const dy = f.y - radius;
            const dist = Math.sqrt(dx * dx + dy * dy);

            if (dist + 15 > radius) { // êµ­ê¸° í¬ê¸° ê³ ë ¤
                // ì¶©ëŒ ì§€ì ì˜ ë²•ì„  ë²¡í„°
                const nx = dx / dist;
                const ny = dy / dist;

                // ë°˜ì‚¬ ê³µì‹: v' = v - 2 * (v Â· n) * n
                const dot = f.vx * nx + f.vy * ny;
                f.vx -= 2 * dot * nx;
                f.vy -= 2 * dot * ny;

                // ë²½ ë°–ìœ¼ë¡œ ë‚˜ê°€ì§€ ì•Šê²Œ ìœ„ì¹˜ ë³´ì •
                f.x = radius + nx * (radius - 15.1);
                f.y = radius + ny * (radius - 15.1);

                // ğŸ’¡ ì¶”ê°€ íŒ: ë°˜ì‚¬ë  ë•Œ ì•„ì£¼ ë¯¸ì„¸í•œ ë¬´ì‘ìœ„ ê°ë„ë¥¼ ë”í•´ ë˜‘ê°™ì€ ê²½ë¡œë¥¼ ë°©ì§€í•©ë‹ˆë‹¤.
                const randomAngle = (Math.random() - 0.5) * 0.1;
                const cos = Math.cos(randomAngle);
                const sin = Math.sin(randomAngle);
                const newVx = f.vx * cos - f.vy * sin;
                const newVy = f.vx * sin + f.vy * cos;
                f.vx = newVx;
                f.vy = newVy;
            }

            f.el.style.left = (f.x - 15) + 'px';
            f.el.style.top = (f.y - 10) + 'px';
        });

        requestAnimationFrame(update);
    }

    createFlags();
    update();
</script>

</body>
</html>
